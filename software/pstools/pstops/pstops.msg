To: support bugs john

In the course of maintaining Alpha, I have found a number of bugs and other
deficiencies in the program PSTOPS, which I use a great deal.

You might like to know that I have my own version of pstops, compatible with
/usr/bin/pstops, which has a number of improvements; to wit:

BUGS FIXED
==========

1.  Various cases of lack of checks on array indices, calls of malloc()
    without checking result != NULL, etc.

2.  The program had an abominable structure & was consequently quite hard to
    maintain, as you will know!	 I have split up huge procedures, etc.

3.  "%%Pages:" comment had 2 args - shd have 1, according to PS LRM.

4.  The pstops "ProcSet" was not a procset at all, according to the defn in
    the PS LRM.	 Consequently, it belonged in the "setup" section of the PS
    output file and not the "prologue" section.  However...

5.  The pstops "ProcSet" undefined (e.g.)  letter, legal, initgraphics,
    showpage in ways which are (a) obscure; (b) unnecessary if the input
    PostScript is conforming; (c) guaranteed to generate non-conforming output
    PostScript.	 Close inspection revealed that the entire "ProcSet", with the
    exception of pstopsmatrix and pstopsxform (whose use has however been
    rationalized), is redundant.  Procset removed!

6.  -wh set the clip path by re-defining initclip!  This is not OK if the
    output PS is to conform.  I've done it properly.

7.  The treatment of Begin/EndBinary was wrong - it's better not to attempt to
    handle these comments than to do it incorrectly.  I've removed refs. to
    these comments.

8.  Piping the o/p of pstops through pstops gave dubious results -- I couldn't
    decide whether it was OK.  (Names were re-used, etc.)  It's correct now,
    and no longer uses setmatrix.

ENHANCEMENTS
============

1.  A "%%Pages:" comment is always added, even if the original document
    did not have one.

2.  I have added a "PstopsPasses:" comment to cater for the possibility that
    future enhancements to pstops will require that the number of times
    a file has been piped through pstops will need to be known, e.g. to
    generate names which are unique to a particular pass.

3.  Spaces & tabs are now ignored between items in page specs (on cmd line).

4.  Spec usage msg now gives the position of the syntax error by '^'.  Try it!

5.  Leading sign in f.p. nums. can be + or -.  (Was - only.)

6.  Old version:  690 source lines, 37 kbytes;
    New version:  455 source lines, 29 kbytes.

"FEATURES" REMOVED
==================

1.  "-b" option removed; can't see what it's for.

2.  -wh no longer sets clip path - this is perhaps unfortunate, but the code
    interacts with PS generated by TeX in a way which has defeated me.

3.  VMS ifdef's removed.

----------------
The source is in /usr/fisher/pstools.  Feel free to make use of it
if you wish.

